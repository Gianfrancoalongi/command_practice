#!/bin/bash

main()
{
    show_description
    build_haystack
    insert_needles
    show_where_haystack_is_located
}

# ------------------------------------------------------------------------------
show_description()
{
cat <<EOF 
    = Needle in a haystack =

    This exercise will create a deep directory structure with many files.  
    Your goal is to find the files which match some specific criteria.
    The criteria will be given to you at the end of this text.

    = Criterias =

    File 1:  not writeable
	     has abba in the name
             size ~ 10 B

    File 2:  it is executable
	     smaller than the first file
	     has fish in the name.

    File 3:  contains the text 123
	     has 321 as part of the name.

    File 4:  contains the name of the file 

EOF
}

build_haystack()
{
    ROOT=$(mktemp --tmpdir=. -d)
    pushd ${ROOT} &> /dev/null
    for i in {1..100}
    do
	mktemp --tmpdir=. -d &> /dev/null
	for i in tmp*
	do
	    pushd ${i} &> /dev/null
	    mktemp --tmpdir=. -d &> /dev/null
	    popd &> /dev/null
	done
    done
    popd &> /dev/null
}

insert_needles()
{
    echo "needles inserted"
}

show_where_haystack_is_located()
{
    echo "showing"
}

main